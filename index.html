<!DOCTYPE html>
<html>
    <head>
        <title>History Tree</title>
        <style>
        .node circle {
            fill: #fff;
            stroke: steelblue;
            stroke-width: 3px;
        }
        .node text {
            font: 12px sans-serif;
        }
        .link {
            fill: none;
            stroke: #ccc;
            stroke-width: 2px;
        }
        </style>
    </head>
    <body>
        <input id="state"/>
        <button onclick="append()">append</button>
        <br/>
        <button onclick="undo()">undo</button>
        <button onclick="redo()">redo</button>
        <button onclick="reset()">reset</button>
        <br/>
        <input id="_id"/>
        <button onclick="find()">find</button>
        <button onclick="revisit()">revisit</button>
        <br/>
        <div id="chart">history tree</div>
    </body>
    <script src="bower_components/d3/d3.js"></script>
    <script src="history-tree/history-tree.js"></script>
    <script src="history-tree/history-tree-view.js"></script>
    <script>
        var chart = historyTreeView();
        chart.container("#chart");
        var tree = historyTree();

        function append() {
            var state = document.getElementById('state').value;
            document.getElementById('state').value = "";
            tree.append(state);
            console.log(tree.structure());
            console.log(tree.path());
            chart.render(tree.structure());
        }

        function undo() {
            tree.undo();
            console.log(tree.structure());
            console.log(tree.path());;
            chart.render(tree.structure());
        }

        function redo() {
            tree.redo();
            console.log(tree.structure());
            console.log(tree.path());
            chart.render(tree.structure());
        }

        function reset() {
            tree.reset();
            console.log(tree.structure());
            console.log(tree.path());
            chart.render(tree.structure());
        }

        function revisit() {
            var _id = document.getElementById('_id').value;
            tree.revisit(_id);
            console.log(tree.structure());
            console.log(tree.path());
            chart.render(tree.structure());
        }

        function find() {
            var _id = document.getElementById('_id').value;
            console.log(_id);
            console.log(tree.find(_id).structure());
            chart.render(tree.structure());
        }
    </script>
    <script>
        
    </script>
</html>